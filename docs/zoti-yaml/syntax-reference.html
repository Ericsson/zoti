
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Syntax Reference &#8212; zoti-yaml 0.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api-reference.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="syntax-reference">
<h1>Syntax Reference<a class="headerlink" href="#syntax-reference" title="Permalink to this heading">¶</a></h1>
<p>ZOTI-YAML sources are files following the <a class="reference external" href="https://yaml.org/spec/1.1/#id857168">YAML 1.1 language
specification</a>. To aid organizing
information into separate libraries and modules, ZOTI-YAML provides a
set of language extensions, such as references and a module system.</p>
<section id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this heading">¶</a></h2>
<p>Modules are the main organization units in ZOTI-YAML projects. Each
module name needs to reflect the path of its associated source
file. Assuming that a path <code class="docutils literal notranslate"><span class="pre">NY_PATH</span></code> is in the search path, then the
file <code class="docutils literal notranslate"><span class="pre">MY_PATH/path/to/MyModule.yaml</span></code> would correspond to the qualified
module name <code class="docutils literal notranslate"><span class="pre">path.to.MyModule</span></code>. The search path can be controlled via:</p>
<ul class="simple">
<li><p>the CLI flag <code class="docutils literal notranslate"><span class="pre">--pathvar</span></code>, see <a class="reference internal" href="#configuration"><span class="std std-doc">Configuration</span></a>;</p></li>
<li><p>the API, with the constructor for <a class="reference internal" href="api-reference.html#zoti_yaml.handlers.Project" title="zoti_yaml.handlers.Project"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_yaml.handlers.Project</span></code></a>.</p></li>
</ul>
<p>Each module consists in a YAML source file formatted as:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">preamble</span>
<span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">document</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">preamble</span></code> contains directives, such as import declarations,
descriptions or other document-wide definitions, whereas
<code class="docutils literal notranslate"><span class="pre">document</span></code> contains the actual source code.</p>
</section>
<section id="preamble">
<h2>Preamble<a class="headerlink" href="#preamble" title="Permalink to this heading">¶</a></h2>
<p>A module’s peramble is for the most part a free-form dictionary
containing metadata preserved and used by downstream tools. ZOTI-YAML
uses two of these entries:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">module</span></code> <em>(string)</em></dt><dd><p>Mandatory field containing the qualified module
name. It <em>needs</em> to reflect its path relative to the <a class="reference internal" href="#modules"><span class="std std-doc">loading
path</span></a>, otherwise an error is raised upon its loading.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">import</span></code> <em>(list)</em></dt><dd><p>List of imports. Each entry is a dictionay:</p>
<dl class="myst field-list simple">
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">module</span></code><span class="colon">:</span></dt>
<dd class="field-odd"><p><em>(string)</em> qualified name of module being imported.</p>
</dd>
<dt class="field-even"><code class="docutils literal notranslate"><span class="pre">as</span></code><span class="colon">:</span></dt>
<dd class="field-even"><p><em>(string)</em> short alias used in the document.</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="document">
<h2>Document<a class="headerlink" href="#document" title="Permalink to this heading">¶</a></h2>
<section id="commands">
<h3>Commands<a class="headerlink" href="#commands" title="Permalink to this heading">¶</a></h3>
<p>ZOTI-YAML documents are regular YAML files that might contain some
additional keywords followed by certain arguments, as documented
below.</p>
<section id="default-defaults-originals">
<h4><code class="docutils literal notranslate"><span class="pre">!default</span></code> [<em>defaults</em>, <em>originals</em>]<a class="headerlink" href="#default-defaults-originals" title="Permalink to this heading">¶</a></h4>
<p>This keyword is followed by a list of exactly 2 YAML objects (i.e.,
trees), <em>defaults</em> and <em>original</em>. When the document tree is being
resolved, it recursivvely fills in the contents of <em>original</em>
according to the values in <em>defaults</em> recursively, based on the
active merge policy (see <code class="docutils literal notranslate"><span class="pre">!policy:&lt;merge_policy&gt;</span></code>). The default
merge policy is <code class="docutils literal notranslate"><span class="pre">!policy:union</span></code>.</p>
<p>A policy is a marked YAML node in the <em>defaults</em> tree, and is
active from that node to all its childred until the last leaf node
or until a node with a policy changing marker. E.g.:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!default</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!policy:A</span>
<span class="w">  </span><span class="nt">root</span><span class="p">:</span><span class="w">          </span><span class="c1"># policy A holds</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar</span><span class="w">     </span><span class="c1"># policy A holds</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!policy:B</span>
<span class="w">    </span><span class="nt">biz</span><span class="p">:</span><span class="w">         </span><span class="c1"># policy B holds</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">baz</span><span class="w">        </span><span class="c1"># policy B holds</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buzz</span><span class="w">       </span><span class="c1"># policy B holds</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">bam</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blep</span><span class="w">    </span><span class="c1"># policy A holds</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!default</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">root</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="kt">!policy:intersect</span>
<span class="w">    </span><span class="nt">foo</span><span class="p">:</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is superseded by original</span>
<span class="w">      </span><span class="nt">b</span><span class="p">:</span><span class="w"> </span><span class="kt">!policy:union+replace</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this supersedes the original</span>
<span class="w">      </span><span class="nt">c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this will be ignored</span>
<span class="w">      </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="kt">!policy:union</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is created</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">bar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is ignored (only the first element in a list in !defaults matters)</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">root</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">foo</span><span class="p">:</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this supersedes the default value</span>
<span class="w">      </span><span class="nt">b</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is superseded by the default value</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">foo</span><span class="p">:</span>
<span class="w">      </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this supersedes the default value</span>
</pre></div>
</div>
<p>resolves to:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">root</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">foo</span><span class="p">:</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this supersedes the default value</span>
<span class="w">      </span><span class="nt">b</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this supersedes the original</span>
<span class="w">      </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is created</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">foo</span><span class="p">:</span>
<span class="w">      </span><span class="nt">b</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this supersedes the original</span>
<span class="w">      </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this supersedes the default value</span>
</pre></div>
</div>
</section>
<section id="policy-merge-policy-any">
<h4><code class="docutils literal notranslate"><span class="pre">!policy:&lt;merge_policy&gt;</span></code> <em>any</em><a class="headerlink" href="#policy-merge-policy-any" title="Permalink to this heading">¶</a></h4>
<p>Policy dictating how the <em>defaults</em> object is to be recursively
merged in <em>originals</em> (see <code class="docutils literal notranslate"><span class="pre">!default</span></code>). The current policies are:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">union</span></code></dt><dd><p>performs the union between <em>originals</em> and <em>defaults</em> where
<em>originals</em> have priority if the same key is found.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">union+replace</span></code></dt><dd><p>performs the union between <em>originals</em> and <em>defaults</em> where
<em>defaults</em> have priority if the same key is found.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">intersect</span></code></dt><dd><p>ignores fields from <em>defaults</em> whose keys are not explicitly
found in <em>originals</em>. <em>originals</em> have priority when the same
key is found.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">intersect+replace</span></code></dt><dd><p>ignores fields from <em>defaults</em> whose keys are not explicitly
found in <em>originals</em>. <em>defaults</em> have priority when the same
key is found.</p>
</dd>
</dl>
</section>
<section id="ref-module-path-name">
<h4><code class="docutils literal notranslate"><span class="pre">!ref</span></code> {<em>module</em>, <em>path</em> | <em>name</em>}<a class="headerlink" href="#ref-module-path-name" title="Permalink to this heading">¶</a></h4>
<p>Reference to an element in a module. When resolved, this object
contains the qualified name or path to a (unique) element. It may
have the following keyword arguments:</p>
<dl class="simple">
<dt><em>module</em>: (optional, string)</dt><dd><p>A module name or an alias. It resolves to an explicit name. If
none is specified it is assumed to be the current module.</p>
</dd>
<dt><em>path</em>: (mutually exlusive with <em>name</em>, string)</dt><dd><p>A path to an element in the tree (see <a class="reference internal" href="api-reference.html#zoti_yaml.core.TreePath" title="zoti_yaml.core.TreePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_yaml.core.TreePath</span></code></a>).</p>
</dd>
<dt><em>name</em>: (mutually exlusive with <em>path</em>, string)</dt><dd><p>An identifier of the element in a certain module.</p>
</dd>
</dl>
<p>The type of the reference depends on which tool in the downstream
uses it. If the tool works with, e.g. JSON trees (similar to
ZOTI-YAML) then specifying <em>path</em> is more reasonable as it is
being constructed into a <a class="reference internal" href="api-reference.html#zoti_yaml.core.TreePath" title="zoti_yaml.core.TreePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_yaml.core.TreePath</span></code></a>
handler. However, if the tool works with other type of element
identifiers, <em>name</em> should be used, as it preserves the string for
downstream manipulation.</p>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Foo</span>
<span class="nt">import</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="nv">Foo.Bar</span><span class="p p-Indicator">,</span><span class="nt"> as</span><span class="p">:</span><span class="w"> </span><span class="nv">Baz</span><span class="p p-Indicator">}</span>
<span class="nn">---</span>
<span class="nt">root</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ref1</span><span class="p">:</span><span class="w"> </span><span class="kt">!ref</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="nv">../../ref2</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ref2</span><span class="p">:</span><span class="w"> </span><span class="kt">!ref</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="nv">Baz</span><span class="p p-Indicator">,</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;egg&quot;</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>resolves to:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Foo</span>
<span class="nt">import</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="nv">Foo.Bar</span><span class="p p-Indicator">,</span><span class="nt"> as</span><span class="p">:</span><span class="w"> </span><span class="nv">Baz</span><span class="p p-Indicator">}</span>
<span class="nn">---</span>
<span class="nt">root</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ref1</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="nv">Foo</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="nv">../../ref2</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">ref2</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="nv">Foo.Bar</span><span class="p p-Indicator">,</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;egg&quot;</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
</section>
<section id="attach-ref">
<h4><code class="docutils literal notranslate"><span class="pre">!attach</span></code> {<em>ref</em>, …}<a class="headerlink" href="#attach-ref" title="Permalink to this heading">¶</a></h4>
<p>Attaches a referenced node at the current location. This command
can have any number of keyword arguments, of which one needs to be
<em>ref</em>.</p>
<dl>
<dt><em>ref</em>: (object) Qualified <a class="reference internal" href="api-reference.html#zoti_yaml.core.TreePath" title="zoti_yaml.core.TreePath"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_yaml.core.TreePath</span></code></a>-based</dt><dd><p>reference to another node (see <code class="docutils literal notranslate"><span class="pre">!ref</span></code>). If the <em>path</em></p>
<blockquote>
<div><ul class="simple">
<li><p>begins with character <code class="docutils literal notranslate"><span class="pre">/</span></code> , it is absolute (i.e. relative
to the root of the module)</p></li>
<li><p>begins with a character other than <code class="docutils literal notranslate"><span class="pre">/</span></code>, it is relative to this
node.</p></li>
</ul>
</div></blockquote>
</dd>
<dt><em>…</em>: (keyword pairs)</dt><dd><p>Arbitrary entries passed to the attached node in the following
conditions:</p>
<blockquote>
<div><ul class="simple">
<li><p>if the attached node is not an object (i.e. dictionary),
these entries are ignored;</p></li>
<li><p>if the attached node is an object but does not contain the
said entry, it is ignored;</p></li>
<li><p>if the attached node is an object and contains the said
entry, the argument entry replaces the original one. The
original entry is stored at path <code class="docutils literal notranslate"><span class="pre">_info/_prev_attrs</span></code>
underneath the attached node.</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
<p><em>OBS1</em>: If both the parent and referenced nodes contain positional
information, this will be captured in the <code class="docutils literal notranslate"><span class="pre">_info/_pos</span></code> entry,
whose head will point to the original position of the referenced
node.</p>
<p><em>OBS2</em>: <code class="docutils literal notranslate"><span class="pre">!ref</span></code> commands are resolved before <code class="docutils literal notranslate"><span class="pre">!attach</span></code>, thus
they can be used to construct references.</p>
<p><em>OBS3</em>: when exchanging arguments between the caller and callee it
is recommended to use a dedicated field (e.g., check the
<em>argfields</em> argument of <a class="reference internal" href="api-reference.html#zoti_yaml.handlers.Project" title="zoti_yaml.handlers.Project"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_yaml.handlers.Project</span></code></a>)</p>
<p>Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Foo</span>
<span class="nn">---</span>
<span class="nt">root</span><span class="p">:</span>
<span class="w">  </span><span class="kt">!attach</span>
<span class="w">  </span><span class="nt">ref</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="nv">Bar</span><span class="p p-Indicator">,</span><span class="nt"> path</span><span class="p">:</span><span class="w"> </span><span class="nv">/root</span><span class="p p-Indicator">[</span><span class="nv">bar</span><span class="p p-Indicator">]</span><span class="nv">/refd</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this replaces the original</span>
<span class="w">  </span><span class="nt">b</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is ignored</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Bar</span>
<span class="nn">---</span>
<span class="nt">root</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar</span>
<span class="w">    </span><span class="nt">refd</span><span class="p">:</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is replaced</span>
<span class="w">      </span><span class="nt">c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is carried from the original</span>
</pre></div>
</div>
<p>resolves to:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">module</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Foo</span>
<span class="nn">---</span>
<span class="nt">root</span><span class="p">:</span>
<span class="w">  </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this replaces the original</span>
<span class="w">  </span><span class="nt">c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">this is carried from the original</span>
</pre></div>
</div>
<p>Module <code class="docutils literal notranslate"><span class="pre">Bar</span></code> remains unchanged.</p>
</section>
<section id="include-file-name-begin-end">
<h4><code class="docutils literal notranslate"><span class="pre">!include</span></code> {<em>file</em>, <em>name</em> | (<em>begin</em>, <em>end</em>)}<a class="headerlink" href="#include-file-name-begin-end" title="Permalink to this heading">¶</a></h4>
<p>One can import raw (chunks of) files using the the <code class="docutils literal notranslate"><span class="pre">!include</span></code>
command. It should be used to attach entire source code to
entries of certain nodes. Usage:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="kt">!include</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="nv">path/relative/to/module.ext</span><span class="p p-Indicator">}</span>
<span class="kt">!include</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="nv">path/relative/to/module.ext</span><span class="p p-Indicator">,</span><span class="nt"> name</span><span class="p">:</span><span class="w"> </span><span class="nv">block_name</span><span class="p p-Indicator">}</span>
<span class="kt">!include</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="nv">path/relative/to/module.ext</span><span class="p p-Indicator">,</span><span class="nt"> begin</span><span class="p">:</span><span class="w"> </span><span class="nv">(keyword|number)</span><span class="p p-Indicator">,</span><span class="nt"> end</span><span class="p">:</span><span class="w"> </span><span class="nv">(keyword|number)</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>In the first case an entire file is included as raw text. In
the second case it extracts the portion of text between the
lines containing <code class="docutils literal notranslate"><span class="pre">BEGIN</span> <span class="pre">block_name</span></code> and <code class="docutils literal notranslate"><span class="pre">END</span>
<span class="pre">block_name</span></code>. In the third case the start and stop lines are
specified either as line numbers or by arbitrary keywords.</p>
</section>
</section>
</section>
<section id="position-information">
<h2>Position Information<a class="headerlink" href="#position-information" title="Permalink to this heading">¶</a></h2>
<p>In addition to the explicit behavior controlled with
<a class="reference internal" href="#commands"><span class="std std-doc">commands</span></a>, ZOTI-YAML implicitly stores positional metadata
for certain keys under an entry at <code class="docutils literal notranslate"><span class="pre">_info/_pos</span></code>. Exactly which nodes
are marked for metadata is controlled via:</p>
<ul class="simple">
<li><p>the CLI flag <code class="docutils literal notranslate"><span class="pre">--keys</span></code>, see <a class="reference internal" href="#configuration"><span class="std std-doc">Configuration</span></a>;</p></li>
<li><p>the API, with the constructor for <a class="reference internal" href="api-reference.html#zoti_yaml.handlers.Project" title="zoti_yaml.handlers.Project"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_yaml.handlers.Project</span></code></a>.</p></li>
</ul>
<p>For each key in the provided list, ZOTI-YAML will mark all first
children of its entry, provided that the children are objects
themselves. For example, if <code class="docutils literal notranslate"><span class="pre">keys</span></code> is set to <code class="docutils literal notranslate"><span class="pre">[&quot;root&quot;,</span> <span class="pre">&quot;node&quot;]</span></code>, here
is how a processed yaml file could look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">root</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a</span><span class="w">                 </span><span class="c1"># marked, child of &quot;root&quot;</span>
<span class="w">  </span><span class="nt">_info</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">_pos</span><span class="p">:</span><span class="w"> </span><span class="nv">...</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">foo</span><span class="p">:</span>
<span class="w">    </span><span class="nt">node</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">b</span><span class="w">             </span><span class="c1"># marked, child of &quot;node&quot;</span>
<span class="w">      </span><span class="nt">_info</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">_pos</span><span class="p">:</span><span class="w"> </span><span class="nv">...</span><span class="p p-Indicator">}</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">bar</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">baz</span><span class="w">            </span><span class="c1"># marked, child of &quot;node&quot;</span>
<span class="w">      </span><span class="nt">_info</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">_pos</span><span class="p">:</span><span class="w"> </span><span class="nv">...</span><span class="p p-Indicator">}</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">b</span><span class="w">                 </span><span class="c1"># marked, child of &quot;root&quot;</span>
<span class="w">  </span><span class="nt">_info</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">_pos</span><span class="p">:</span><span class="w"> </span><span class="nv">...</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">foo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bar</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">baz</span><span class="w">                     </span><span class="c1"># not marked, not an object</span>
</pre></div>
</div>
<p>The positional metadata at <code class="docutils literal notranslate"><span class="pre">_info/_pos</span></code> is presented as a list of
entries containing positional information. The last entry in a list
corresponds to the current position in the file. Every time a (marked)
node is parsed by ZOTI-YAML its current position is appended at the
end of the list. This mean that certain nodes can be “handed over”
between tools, and ZOTI-YAML will keep the history of their positions
(e.g. in intemediate files). In the following example the shown node
has been pre-processed by ZOTI-YAML in preparation for two other tools
(ZOTI-Graph and ZOTI-Gen), and its information has resided in two
different files.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">_info</span><span class="p">:</span>
<span class="w">  </span><span class="nt">_pos</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">36</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">14</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1066</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1220</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">app/ProdCons/Src.zog</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">zoti-graph-0.1.0</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">20</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">8</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">740</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">906</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">gen/graph/ProdCons.yaml</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">zoti-gen-0.1.0</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Check the <a class="reference internal" href="api-reference.html"><span class="doc std std-doc">API Reference</span></a> for what each field means.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading">¶</a></h2>
<p>The CLI tool can be run like any Python module depending on how it is
distributed. Configuration arguments are documented by passing
<code class="docutils literal notranslate"><span class="pre">--help</span></code>. Each configuration parameter can be specified also in a
<a class="reference external" href="https://toml.io/en/">TOML</a> file called <code class="docutils literal notranslate"><span class="pre">zoticonf.toml</span></code> found in the
current folder, under the following sections:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[zoti]</span>

<span class="c1"># global configuration variables, read by all tools</span>

<span class="k">[zoti.yaml]</span>

<span class="c1"># configuration variables for ZOTI-YAML. override global ones</span>

<span class="k">[zoti.yaml.&lt;class&gt;]</span>

<span class="c1"># specialized configuration loaded with:</span>
<span class="c1">#</span>
<span class="c1">#      $(ZOML) --spec &lt;class&gt;</span>
<span class="c1">#</span>
<span class="c1"># where &lt;class&gt; is replaced with an arbitrary name. Overrides </span>
<span class="c1"># parameters in [zoti.yaml]</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">zoti-yaml</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Ericsson&repo=zoti&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Syntax Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preamble">Preamble</a></li>
<li class="toctree-l2"><a class="reference internal" href="#document">Document</a></li>
<li class="toctree-l2"><a class="reference internal" href="#position-information">Position Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://ericsson.github.io/zoti/">ZOTI</a></li>
    
    <li class="toctree-l1"><a href="https://github.com/Ericsson/zoti/tree/main/zoti-yaml">GitHub</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tutorial.html" title="previous chapter">Tutorial</a></li>
      <li>Next: <a href="api-reference.html" title="next chapter">API Reference</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Ericsson S&T.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/syntax-reference.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>