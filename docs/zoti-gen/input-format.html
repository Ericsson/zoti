
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Input Specification &#8212; zoti-gen 0.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Template Libraries" href="template-libs.html" />
    <link rel="prev" title="ZOTI-Gen" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="input-specification">
<h1>Input Specification<a class="headerlink" href="#input-specification" title="Permalink to this heading">¶</a></h1>
<p>ZOTI-Gen structures are specified using:</p>
<ul class="simple">
<li><p>a serialization format (e.g. JSON or YAML) representing the
structure of the code blocks, their hierarchy and bindings;</p></li>
<li><p>an extended <a class="reference external" href="https://jinja.palletsprojects.com">Jinja2</a> template
format contained as strings by the <code class="docutils literal notranslate"><span class="pre">code</span></code> entries of the
serialization format.</p></li>
<li><p>a simpler <a class="reference external" href="https://docs.python.org/3/library/string.html#template-strings">templated
string</a>
format to define glue macros in some of the binding entries.</p></li>
</ul>
<section id="format-schema">
<h2>Format Schema<a class="headerlink" href="#format-schema" title="Permalink to this heading">¶</a></h2>
<p>ZOTI-Gen input files are describing code blocks using a serialization
format. Similarly to other ZOTI tools, ZOTI-Gen stores modules in a
<a class="reference external" href="https://ericsson.github.io/zoti/zoti-yaml">ZOTI-YAML</a> container, hence input files
contain the arguments passed to its constructor, among which a
<em>preamble</em> object and a <em>document</em> object.</p>
<section id="preamble">
<h3>Preamble<a class="headerlink" href="#preamble" title="Permalink to this heading">¶</a></h3>
<p>Apart from the mandatory <em>module</em> entry containing the qualified name
of the current module, ZOTI-Gen preambles need to contain the
following entry:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">top</span></code> <em>(string)</em></dt><dd><p>the name of the “top” block from which all other blocks are
recursively referenced.</p>
</dd>
</dl>
</section>
<section id="document">
<h3>Document<a class="headerlink" href="#document" title="Permalink to this heading">¶</a></h3>
<p>A ZOTI-Gen document consists in a list of <code class="docutils literal notranslate"><span class="pre">block</span></code> entries. Each entry
would fill in an equivalent class container hence we use the class API
documnentation to document the entry schemas.</p>
<section id="block">
<h4><code class="docutils literal notranslate"><span class="pre">block</span></code><a class="headerlink" href="#block" title="Permalink to this heading">¶</a></h4>
<p>A block describes a unit of code that might be related to other
blocks through bindings and might contain a
template. Internally it is represented using a
<a class="reference internal" href="api-reference.html#zoti_gen.core.Block" title="zoti_gen.core.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_gen.core.Block</span></code></a> class. Blocks are described using
the following entries;</p>
<dl class="field-list simple">
<dt class="field-odd">name<span class="colon">:</span></dt>
<dd class="field-odd"><p>(mandatory, string) the unique ID of the block</p>
</dd>
<dt class="field-even">type<span class="colon">:</span></dt>
<dd class="field-even"><p>(<a class="reference external" href="#reference">Reference</a>) points to an
externally-defined library template which would fill in
the corresponding entries below, as documented in
<a class="reference external" href="template-libs">Template Libraries</a> page.</p>
</dd>
<dt class="field-odd"><a class="reference external" href="#requirement">requirement</a><span class="colon">:</span></dt>
<dd class="field-odd"><p>(dict) block prerequisites</p>
</dd>
<dt class="field-even"><a class="reference external" href="#label">label</a><span class="colon">:</span></dt>
<dd class="field-even"><p>(list) label entries, each with a
unique name</p>
</dd>
<dt class="field-odd">param<span class="colon">:</span></dt>
<dd class="field-odd"><p>(dict) generic parameters passed as-is to the template
renderer, accessed with the <cite>param</cite> key.</p>
</dd>
<dt class="field-even"><a class="reference external" href="#instance">instance</a><span class="colon">:</span></dt>
<dd class="field-even"><p>(list) other blocks instantiated
from this one.</p>
</dd>
<dt class="field-odd">code<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference external" href="#code-template">Template</a>) containing this block’s <a class="reference external" href="#code-template">Code
Template</a>. Rendered witn the context:</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>                    <span class="n">name</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>    <span class="c1"># component&#39;s name</span>
                    <span class="n">label</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>  <span class="c1"># resolved labels</span>
                    <span class="n">param</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">param</span><span class="p">,</span>  <span class="c1"># parameters</span>
                    <span class="n">placeholder</span><span class="o">=</span><span class="p">{</span>      <span class="c1"># only one placeholder</span>
                        <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">code</span>
                    <span class="p">},</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">prototype<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference external" href="#code-template">Template</a>) defines this block’s type
signature, as provided from a type system. Rendered with
the following context:</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>                    <span class="n">label</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>   <span class="c1"># resolved labels</span>
                    <span class="n">param</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">param</span><span class="p">,</span>   <span class="c1"># parameters</span>
                    <span class="n">placeholder</span><span class="o">=</span><span class="n">rinst</span><span class="p">,</span>  <span class="c1"># recursivly-expanded block instances</span>
</pre></div>
</div>
</section>
<section id="requirement">
<h4><code class="docutils literal notranslate"><span class="pre">requirement</span></code><a class="headerlink" href="#requirement" title="Permalink to this heading">¶</a></h4>
<p>Illustrates prerequisites for the parent element. Internally it is
represented using a <a class="reference internal" href="api-reference.html#zoti_gen.core.Requirement" title="zoti_gen.core.Requirement"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_gen.core.Requirement</span></code></a> class. It may
contain the following entries:</p>
</section>
<section id="label">
<h4><code class="docutils literal notranslate"><span class="pre">label</span></code><a class="headerlink" href="#label" title="Permalink to this heading">¶</a></h4>
<p>A label is the low-level code equivalent of a ‘port’. Its function
is to provide a name which can be used in bindings and glue
generation. Internally it is represented using a
<a class="reference internal" href="api-reference.html#zoti_gen.core.Label" title="zoti_gen.core.Label"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_gen.core.Label</span></code></a> class.</p>
<dl class="field-list simple">
<dt class="field-odd">name<span class="colon">:</span></dt>
<dd class="field-odd"><p>(string) unique ID in the scope of the parent block</p>
</dd>
<dt class="field-even">glue<span class="colon">:</span></dt>
<dd class="field-even"><p>(dict) entries with glue code tailored for various
circumstances, provided by the type system and accessible from
within the code template using the <cite>label.&lt;port_id&gt;.glue</cite> key.</p>
</dd>
<dt class="field-odd">usage<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference external" href="#code-template">Template</a>) defines how this label is to be
expanded in the code. Provided by the type system. Rendered
with the following context:</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>                        <span class="n">p</span><span class="o">=</span><span class="n">key</span><span class="p">,</span>         <span class="c1"># ID of the current label</span>
                        <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>  <span class="c1"># complete namespace of resolved labels</span>
                        <span class="n">param</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>  <span class="c1"># complete namespace of parameters</span>
</pre></div>
</div>
</section>
<section id="instance">
<h4><code class="docutils literal notranslate"><span class="pre">instance</span></code><a class="headerlink" href="#instance" title="Permalink to this heading">¶</a></h4>
<p>Refers to another block and (at minimum) triggers its evaluation by
the the <a class="reference external" href="rendering">Rendering</a> engine. It can define an
inclusion relation between the parent and the referenced blocks,
in which case the referenced one would occupy the space pointed
out by a <em>placeholder</em> markup in the parent’s
template. Furthermore, the relation between the two blocks can be
enforced by a set of <em>bindings</em> that connects the labels and
parameters of the two blocks. Internally, aln instance is
represented using a <a class="reference internal" href="api-reference.html#zoti_gen.core.Instance" title="zoti_gen.core.Instance"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_gen.core.Instance</span></code></a> class.</p>
<p>To define a block instance within the parent block the following
entries might be used:</p>
<dl class="field-list simple">
<dt class="field-odd">block<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference external" href="#reference">Reference</a>) points to an existing
(i.e. loaded) block.</p>
</dd>
<dt class="field-even">placeholder<span class="colon">:</span></dt>
<dd class="field-even"><p>(string) the name of the placeholder, as it appears
in the parent’s <a class="reference external" href="#code-template">Code Template</a>.</p>
</dd>
<dt class="field-odd">directive<span class="colon">:</span></dt>
<dd class="field-odd"><p>(list of strings) directive flags passed to the
<a class="reference external" href="rendering">Rendering</a> engine.</p>
</dd>
<dt class="field-even"><a class="reference external" href="#bind">bind</a><span class="colon">:</span></dt>
<dd class="field-even"><p>(list) bindings between the labels and
parameters of the parent block and those of the referenced
block.</p>
</dd>
<dt class="field-odd">usage<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference external" href="#code-template">Template</a>) defines how this block is being
instantiated in case it is not expanded inline (e.g., as
function call). The template string is defined by the type
system. It is rendered with the following contexts, depending
on which directive is passed:</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expand</span></code> is in directives</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>                        <span class="n">name</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>    <span class="c1"># component&#39;s name</span>
                        <span class="n">label</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>  <span class="c1"># resolved labels</span>
                        <span class="n">param</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">param</span><span class="p">,</span>  <span class="c1"># parameters</span>
                        <span class="n">placeholder</span><span class="o">=</span><span class="p">{</span>      <span class="c1"># only one placeholder</span>
                            <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">code</span>
                        <span class="p">},</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expand</span></code> is not in directives</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>                        <span class="n">name</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>    <span class="c1"># component&#39;s name</span>
                        <span class="n">param</span><span class="o">=</span><span class="n">comp</span><span class="o">.</span><span class="n">param</span><span class="p">,</span>  <span class="c1"># parameters</span>
                        <span class="n">label</span><span class="o">=</span><span class="n">b_labels</span><span class="p">,</span>    <span class="c1"># bounded (parent) labels</span>
</pre></div>
</div>
</section>
<section id="bind">
<h4><code class="docutils literal notranslate"><span class="pre">bind</span></code><a class="headerlink" href="#bind" title="Permalink to this heading">¶</a></h4>
<p>A binding between one of the labels or parameters of the parent
block and a label or parameter of the referenced block.
Internally it is represented using a <a class="reference internal" href="api-reference.html#zoti_gen.core.Bind" title="zoti_gen.core.Bind"><code class="xref py py-class docutils literal notranslate"><span class="pre">zoti_gen.core.Bind</span></code></a>
class. It needs to contain <em>only one</em> of the following entries:</p>
<dl class="field-list simple">
<dt class="field-odd">label_to_label<span class="colon">:</span></dt>
<dd class="field-odd"><p>(dict)</p>
<dl class="field-list simple">
<dt class="field-odd">parent<span class="colon">:</span></dt>
<dd class="field-odd"><p>(str) ID of parent</p>
</dd>
<dt class="field-even">child<span class="colon">:</span></dt>
<dd class="field-even"><p>(str) ID of child</p>
</dd>
<dt class="field-odd">usage<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<a class="reference external" href="#code-template">Template</a>) rendered with context:</p>
</dd>
</dl>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>                    <span class="n">p</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>      <span class="c1"># ID of parent</span>
                    <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>  <span class="c1"># entire namespace of resolved labels</span>
                    <span class="n">param</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>  <span class="c1"># entire namespace of parameters</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">usage_to_label<span class="colon">:</span></dt>
<dd class="field-odd"><p>(dict)</p>
<dl class="field-list simple">
<dt class="field-odd">child<span class="colon">:</span></dt>
<dd class="field-odd"><p>(str) ID of child</p>
</dd>
<dt class="field-even">usage<span class="colon">:</span></dt>
<dd class="field-even"><p>(<a class="reference external" href="#code-template">Template</a>) rendered with context:</p>
</dd>
</dl>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>                    <span class="n">label</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>  <span class="c1"># entire namespace of resolved labels</span>
                    <span class="n">param</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>  <span class="c1"># entire namespace of parameters</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">param_to_param<span class="colon">:</span></dt>
<dd class="field-odd"><p>(dict)</p>
<dl class="field-list simple">
<dt class="field-odd">parent<span class="colon">:</span></dt>
<dd class="field-odd"><p>(str) Parent parameter</p>
</dd>
<dt class="field-even">child<span class="colon">:</span></dt>
<dd class="field-even"><p>(str)  Child parameter</p>
</dd>
</dl>
</dd>
<dt class="field-even">value_to_param<span class="colon">:</span></dt>
<dd class="field-even"><p>(dict)</p>
<dl class="field-list simple">
<dt class="field-odd">value<span class="colon">:</span></dt>
<dd class="field-odd"><p>(str) Value as simple string</p>
</dd>
<dt class="field-even">child<span class="colon">:</span></dt>
<dd class="field-even"><p>(str) Child parameter</p>
</dd>
</dl>
</dd>
</dl>
</section>
</section>
</section>
<section id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this heading">¶</a></h2>
<p>A reference is an entry pointing to an object by its qualified name
and/or path. Since ZOTI-Gen documents are flat (i.e., they consist
in a flat list of block descriptions), and the only objects
referenced in ZOTI-Gen are blocks, the only access mechanism
implemented is referencing by (block) name. Hence, every reference
entry will have the following mandatory fields:</p>
<dl class="field-list simple">
<dt class="field-odd">module<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>(string)</em> the full (dot-separated) name of module
containing the referenced block, even if that means the current
module.</p>
</dd>
<dt class="field-even">name<span class="colon">:</span></dt>
<dd class="field-even"><p><em>(string)</em> the name of the referenced block.</p>
</dd>
</dl>
<p>For less verbose reference syntax one could check the <code class="docutils literal notranslate"><span class="pre">!ref</span></code>
keyword in the <a class="reference external" href="../zoti-yaml">ZOTI-YAML</a> language extension and
pre-processor.</p>
</section>
<section id="code-template">
<h2>Code Template<a class="headerlink" href="#code-template" title="Permalink to this heading">¶</a></h2>
<p>Code templates are strings with
<a class="reference external" href="https://jinja.palletsprojects.com/en/3.1.x/templates/">Jinja2</a> markup
commands evaluated in a custom context built from the resolved block
specification. Depending on its role in the input specification (see
documentation above), each template is evaluated and rendered using a
custom context built from resolved information from the interal
representation, most usually having the following context fields:</p>
<dl class="myst field-list simple">
<dt class="field-odd">label<span class="colon">:</span></dt>
<dd class="field-odd"><p>contains a dictionary of all resolved <code class="docutils literal notranslate"><span class="pre">label</span></code> entries (see
<a class="reference internal" href="#"><span class="doc std std-doc">Input Specification</span></a>), both own and passed via bindings, where the
keys are the original (specified) names. Each entry contains
possibly updated information (i.e., <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">usage</span></code> and <code class="docutils literal notranslate"><span class="pre">glue</span></code>)
reflecting the block’s bindings.</p>
</dd>
<dt class="field-even">param<span class="colon">:</span></dt>
<dd class="field-even"><p>usually contains a merged dictionary with this block’s <code class="docutils literal notranslate"><span class="pre">param</span></code>
entries and the ones passed via bindings.</p>
</dd>
<dt class="field-odd">placeholder<span class="colon">:</span></dt>
<dd class="field-odd"><p>will contain rendered code blocks for various declared
instances (e.g., as inline code or function call) in the current
block’s scope.</p>
</dd>
</dl>
<p>Apart from the <a class="reference external" href="https://jinja.palletsprojects.com/en/3.1.x/templates/#list-of-builtin-filters">Jinja2 builtin functions</a>,
ZOTI-Gen adds the following functions that can be called from
within code templates.</p>
<dl class="py method">
<dt class="sig sig-object py" id="zoti_gen.jinja_extensions.JinjaExtensions.find">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">JinjaExtensions.</span></span><span class="sig-name descname"><span class="pre">find</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="_modules/zoti_gen/jinja_extensions.html#JinjaExtensions.find"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zoti_gen.jinja_extensions.JinjaExtensions.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the element with (the dot-separated) <em>path</em> in a <em>json</em>
dictionary, where <em>path</em> is specified as a string. E.g.</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="c">{# considering the context {&#39;a&#39;: None, &#39;b&#39;:{&#39;foo&#39;:{&#39;bar&#39;: &#39;baz&#39;}}} #}</span>

<span class="x">{ b | find(&quot;foo.bar&quot;) }</span>

<span class="c">{# is the same as #}</span>

<span class="x">{ b.foo.bar }</span>
</pre></div>
</div>
<p>both rendering <code class="docutils literal notranslate"><span class="pre">baz</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zoti_gen.jinja_extensions.JinjaExtensions.setdefaults">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">JinjaExtensions.</span></span><span class="sig-name descname"><span class="pre">setdefaults</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">defaults</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span></span></span><a class="reference internal" href="_modules/zoti_gen/jinja_extensions.html#JinjaExtensions.setdefaults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zoti_gen.jinja_extensions.JinjaExtensions.setdefaults" title="Permalink to this definition">¶</a></dt>
<dd><p>For every direct child of the given <em>json</em> element it (possibly
recursively) sets the <em>defaults</em> values if undefined. E.g.:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">json</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;a&#39;</span><span class="o">:</span> <span class="kp">None</span><span class="o">,</span> <span class="s1">&#39;b&#39;</span><span class="o">:{</span><span class="s1">&#39;foo&#39;:&#39;bar&#39;</span><span class="o">}}</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">defaults</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;foo&#39;:&#39;biff&#39;</span><span class="o">,</span> <span class="s1">&#39;baz&#39;:&#39;buzz&#39;</span><span class="o">}</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">example</span> <span class="o">=</span> <span class="nv">setdefaults</span><span class="o">(</span><span class="nv">json</span><span class="o">,</span> <span class="nv">defaults</span><span class="o">)</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>results in <code class="docutils literal notranslate"><span class="pre">example</span></code> containing the dictionary</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span><span class="s1">&#39;biff&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">:</span><span class="s1">&#39;buzz&#39;</span><span class="p">},</span> <span class="s1">&#39;b&#39;</span><span class="p">:{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">:</span><span class="s1">&#39;buzz&#39;</span><span class="p">}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zoti_gen.jinja_extensions.JinjaExtensions.eval">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">JinjaExtensions.</span></span><span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/zoti_gen/jinja_extensions.html#JinjaExtensions.eval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zoti_gen.jinja_extensions.JinjaExtensions.eval" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders a Jinja2 string within a <em>context</em>. Useful if both <em>string</em>
and <em>context</em> are passed to the current template context.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zoti_gen.jinja_extensions.JinjaExtensions.error">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">JinjaExtensions.</span></span><span class="sig-name descname"><span class="pre">error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/zoti_gen/jinja_extensions.html#JinjaExtensions.error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zoti_gen.jinja_extensions.JinjaExtensions.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an exception from within the template logic.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zoti_gen.jinja_extensions.JinjaExtensions.getter">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">JinjaExtensions.</span></span><span class="sig-name descname"><span class="pre">getter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elem</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/zoti_gen/jinja_extensions.html#JinjaExtensions.getter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zoti_gen.jinja_extensions.JinjaExtensions.getter" title="Permalink to this definition">¶</a></dt>
<dd><p>ZOTI-Gen specific formatter that retrieves the type getter macro
created by ZOTI-FTN and stored in each label’s <code class="docutils literal notranslate"><span class="pre">glue</span></code>
entry and creates an access expresion based on it:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">getter</span><span class="o">(</span><span class="s2">&quot;data.data.LEN&quot;</span><span class="o">)</span> <span class="cp">}}</span>

<span class="c">{# is equivalent to #}</span>

<span class="cp">{{</span> <span class="nv">label.data.glue.data.LEN._get</span> <span class="cp">}}</span><span class="x">(</span><span class="cp">{{</span> <span class="nv">label.data.name</span> <span class="cp">}}</span><span class="x">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="zoti_gen.jinja_extensions.JinjaExtensions.setter">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">JinjaExtensions.</span></span><span class="sig-name descname"><span class="pre">setter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elem</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/zoti_gen/jinja_extensions.html#JinjaExtensions.setter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#zoti_gen.jinja_extensions.JinjaExtensions.setter" title="Permalink to this definition">¶</a></dt>
<dd><p>ZOTI-Gen specific formatter that retrieves the type setter macro
created by ZOTI-FTN and stored in each label’s <code class="docutils literal notranslate"><span class="pre">glue</span></code>
entry and creates an access expression based on it:</p>
<div class="highlight-jinja notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">setter</span><span class="o">(</span><span class="s2">&quot;data.data.c&quot;</span><span class="o">,</span> <span class="s2">&quot;i&quot;</span><span class="o">,</span> <span class="s2">&quot;x&quot;</span> <span class="cp">}}</span>

<span class="c">{# is equivalent to #}</span>

<span class="cp">{{</span> <span class="nv">label.data.glue.data.c._set</span> <span class="cp">}}</span><span class="x">(</span><span class="cp">{{</span> <span class="nv">label.data.name</span> <span class="cp">}}</span><span class="x">, i, x)</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">zoti-gen</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Ericsson&repo=zoti&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Input Specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#format-schema">Format Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reference">Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-template">Code Template</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="template-libs.html">Template Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="rendering.html">Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://ericsson.github.io/zoti/">ZOTI</a></li>
    
    <li class="toctree-l1"><a href="https://github.com/Ericsson/zoti/tree/main/zoti-tran">GitHub</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">ZOTI-Gen</a></li>
      <li>Next: <a href="template-libs.html" title="next chapter">Template Libraries</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022-2023 Ericsson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/input-format.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>